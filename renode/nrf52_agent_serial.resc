using sysbus

mach create "nrf52-ci-agent"
# 由 CI 注入 nrf52.repl 的「完整檔案路徑」
machine LoadPlatformDescription @__PLATFILE__

# 由 CI 注入 ELF 路徑
sysbus LoadELF __ELF_PATH__

# 綁定 UART → PTY
emulation CreateUartPtyTerminal "pty0"
connector Connect sysbus.uart0 pty0

# 讓 CI 從 log 抓到 PTY
log "UART PTY: @{sysbus.uart0.FileName}"

start
emulation RunFor "8.0"
q
