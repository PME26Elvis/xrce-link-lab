using sysbus

mach create "nrf52-ci-agent"
# 由 CI 注入 platforms 目錄的絕對路徑
machine LoadPlatformDescription @__PLATFORMS__/cpus/nrf52.repl

# 由 CI 注入 ELF 路徑
sysbus LoadELF __ELF_PATH__

# 綁定 UART → PTY
emulation CreateUartPtyTerminal "pty0"
connector Connect sysbus.uart0 pty0

# 記錄 PTY 路徑
log "UART PTY: @{sysbus.uart0.FileName}"

start
emulation RunFor "8.0"
q
