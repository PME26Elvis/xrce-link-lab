using sysbus

mach create "nrf52-ci-capture"
machine LoadPlatformDescription @platforms/cpus/nrf52.repl
mach set "nrf52-ci-capture"

# 由 CI/Robot 注入 ELF 路徑
sysbus LoadELF __ELF_PATH__

# 直接建立固定路徑的 PTY，避免日誌解析不穩
# 這行會在宿主建立 /tmp/xrce_uart 並命名此端子為 "term"
emulation CreateUartPtyTerminal "term" "/tmp/xrce_uart"
connector Connect sysbus.uart0 term

# 讓韌體有時間輸出字串
start
emulation RunFor "3.0"
pause
